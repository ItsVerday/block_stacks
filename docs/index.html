<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Block Stacks</title></head><body oncontextmenu="return false;"> <style>body{background-color:#000;margin:0}canvas{transform-origin:0 0;image-rendering:pixelated;position:absolute;top:0;left:0}</style> <script type="module">var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};let e;const t=new Array(128).fill(void 0);function r(e){return t[e]}t.push(void 0,null,!0,!1);let i=t.length;function o(e){var n=r(e);return e<132||(t[e]=i,i=e),n}const u=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});u.decode();let c=null;function a(){return c=null!==c&&0!==c.byteLength?c:new Uint8Array(e.memory.buffer)}function _(e,n){return u.decode(a().subarray(e,e+n))}function s(e){i===t.length&&t.push(t.length+1);var n=i;return i=t[n],t[n]=e,n}function f(n){e.tick_game(n)}let b=0;const w=new TextEncoder("utf-8"),g="function"==typeof w.encodeInto?function(e,n){return w.encodeInto(e,n)}:function(e,n){var t=w.encode(e);return n.set(t),{read:e.length,written:t.length}};function d(n,t){var n=function(e,n,t){if(void 0===t){const t=w.encode(e),r=n(t.length);return a().subarray(r,r+t.length).set(t),b=t.length,r}let r=e.length,i=n(r);var o=a();let _=0;for(;_<r;_++){const n=e.charCodeAt(_);if(127<n)break;o[i+_]=n}if(_!==r){0!==_&&(e=e.slice(_)),i=t(i,r,r=_+3*e.length);const n=a().subarray(i+_,i+r);_+=g(e,n).written}return b=_,i}(n,e.__wbindgen_malloc,e.__wbindgen_realloc),r=b;e.handle_key_input(n,r,t)}function l(n,t){try{return n.apply(this,t)}catch(n){e.__wbindgen_exn_store(s(n))}}class h{static __wrap(e){var n=Object.create(h.prototype);return n.ptr=e,n}__destroy_into_raw(){var e=this.ptr;return this.ptr=0,e}free(){var n=this.__destroy_into_raw();e.__wbg_size_free(n)}get width(){return e.__wbg_get_size_width(this.ptr)>>>0}set width(n){e.__wbg_set_size_width(this.ptr,n)}get height(){return e.__wbg_get_size_height(this.ptr)>>>0}set height(n){e.__wbg_set_size_height(this.ptr,n)}}function y(){var t={wbg:{}};return t.wbg.__wbindgen_object_drop_ref=function(e){o(e)},t.wbg.__wbg_randomFillSync_6894564c2c334c42=function(){return l(function(e,n,t){r(e).randomFillSync((e=n,n=t,a().subarray(+e,+e+n)))},arguments)},t.wbg.__wbg_getRandomValues_805f1c3d65988a5a=function(){return l(function(e,n){r(e).getRandomValues(r(n))},arguments)},t.wbg.__wbg_crypto_e1d53a1d73fb10b8=function(e){return s(r(e).crypto)},t.wbg.__wbindgen_is_object=function(e){return"object"==typeof(e=r(e))&&null!==e},t.wbg.__wbg_process_038c26bf42b093f8=function(e){return s(r(e).process)},t.wbg.__wbg_versions_ab37218d2f0b24a8=function(e){return s(r(e).versions)},t.wbg.__wbg_node_080f4b19d15bc1fe=function(e){return s(r(e).node)},t.wbg.__wbindgen_is_string=function(e){return"string"==typeof r(e)},t.wbg.__wbg_msCrypto_6e7d3e1f92610cbb=function(e){return s(r(e).msCrypto)},t.wbg.__wbg_require_78a3dcfbdba9cbce=function(){return l(function(){return s(module.require)},arguments)},t.wbg.__wbindgen_is_function=function(e){return"function"==typeof r(e)},t.wbg.__wbindgen_string_new=function(e,n){return s(_(e,n))},t.wbg.__wbg_newnoargs_2b8b6bd7753c76ba=function(e,n){return s(new Function(_(e,n)))},t.wbg.__wbg_call_95d1ea488d03e4e8=function(){return l(function(e,n){return s(r(e).call(r(n)))},arguments)},t.wbg.__wbindgen_object_clone_ref=function(e){return s(r(e))},t.wbg.__wbg_self_e7c1f827057f6584=function(){return l(function(){return s(self.self)},arguments)},t.wbg.__wbg_window_a09ec664e14b1b81=function(){return l(function(){return s(window.window)},arguments)},t.wbg.__wbg_globalThis_87cbb8506fecf3a9=function(){return l(function(){return s(globalThis.globalThis)},arguments)},t.wbg.__wbg_global_c85a9259e621f3db=function(){return l(function(){return s(n.global)},arguments)},t.wbg.__wbindgen_is_undefined=function(e){return void 0===r(e)},t.wbg.__wbg_call_9495de66fdbe016b=function(){return l(function(e,n,t){return s(r(e).call(r(n),r(t)))},arguments)},t.wbg.__wbg_buffer_cf65c07de34b9a08=function(e){return s(r(e).buffer)},t.wbg.__wbg_newwithbyteoffsetandlength_9fb2f11355ecadf5=function(e,n,t){return s(new Uint8Array(r(e),n>>>0,t>>>0))},t.wbg.__wbg_new_537b7341ce90bb31=function(e){return s(new Uint8Array(r(e)))},t.wbg.__wbg_set_17499e8aa4003ebd=function(e,n,t){r(e).set(r(n),t>>>0)},t.wbg.__wbg_length_27a2afe8ab42b09f=function(e){return r(e).length},t.wbg.__wbg_newwithlength_b56c882b57805732=function(e){return s(new Uint8Array(e>>>0))},t.wbg.__wbg_subarray_7526649b91a252a6=function(e,n,t){return s(r(e).subarray(n>>>0,t>>>0))},t.wbg.__wbindgen_throw=function(e,n){throw new Error(_(e,n))},t.wbg.__wbindgen_memory=function(){return s(e.memory)},t}function p(n,t){return e=n.exports,m.__wbindgen_wasm_module=t,c=null,e}async function m(e){void 0===e&&(e=new URL("block_stacks_bg.98d0e7b9.wasm",import.meta.url));var n=y(),{instance:e,module:n}=await async function(e,n){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,n)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}var t=await e.arrayBuffer();return WebAssembly.instantiate(t,n)}return(t=await WebAssembly.instantiate(e,n))instanceof WebAssembly.Instance?{instance:t,module:e}:t}(await(e="string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL?fetch(e):e),n);return p(e,n)}var v=m;const A=new AudioContext;async function E(e){var e=await A.decodeAudioData(e),n=A.createBufferSource();n.buffer=e,n.connect(A.destination),n.start()}function L(e,n){var t=window.innerWidth,r=window.innerHeight,i=n.width,o=n.height,a=t/i,_=r/o;let u=0,s=0;e.width=n.width,e.height=n.height,n=Math.min(a,_),a<_?s=(r-a*o)/2:u=(t-_*i)/2,e.style.transform=`scale(${n})`,e.style.left=u+"px",e.style.top=s+"px"}function k(n,t){n=n.button,e.handle_mouse_input(n,t)}function C(n,t){var r=window.innerWidth,i=window.innerHeight,o=t.width,a=r/o,_=i/(t=t.height);let u=n.pageX,s=n.pageY;n=Math.min(a,_),a<_?s-=(i-a*t)/2:u-=(r-_*o)/2,u/=n,s/=n,i=u,a=s,e.handle_mouse_move(i,a)}function R(e,n){e.repeat||d(e.key.toLowerCase(),n)}!async function(){await v(),t=e.requested_size();const a=h.__wrap(t),_=e.requested_tickrate()>>>0,n=document.createElement("canvas"),u=n.getContext("2d");var t,r;u.imageSmoothingEnabled=!1,document.body.appendChild(n),L(n,a),addEventListener("resize",()=>L(n,a)),addEventListener("mousedown",e=>{k(e,!0),C(e,a)}),addEventListener("mouseup",e=>{k(e,!1),C(e,a)}),addEventListener("mousemove",e=>C(e,a)),addEventListener("keydown",e=>R(e,!0)),addEventListener("keyup",e=>R(e,!1)),t=a.width,r=a.height,e.init_game(t,r);let s=0,c=0,b=Date.now()/1e3;!function n(){var t=Date.now()/1e3,r=t-b;for(b=t,s+=r*_;s>c;)c++,f(1/_);t=c/_,r=o(e.draw_game(t)),t=new ImageData(new Uint8ClampedArray(r),a.width,a.height),u.putImageData(t,0,0);let i=e.flush_sounds()>>>0;for(;0<i--;)E(o(e.pop_sound_data()).buffer);requestAnimationFrame(n)}()}();</script> </body></html>